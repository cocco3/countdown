(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(26)},22:function(e,t,n){},23:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(7),i=n.n(r),c=(n(22),n(12)),s=n(8),u=n(9),l=n(14),d=n(10),p=n(15),b=n(3),f=(n(23),n(2)),g=n(13),h=n(0),m={Count:{display:"block",margin:"1.2em 0",textAlign:"start"},CountName:{color:"#dadada",display:"block"},CountDate:{display:"block",fontSize:"1.3em"}};function v(){var e=Object(f.a)(["",""]);return v=function(){return e},e}function j(){var e=Object(f.a)(["",""]);return j=function(){return e},e}function O(){var e=Object(f.a)(["",""]);return O=function(){return e},e}function w(e){var t=e.date,n=e.name,a=e.onClick;return Object(h.b)("div",{onClick:a,css:Object(h.a)(O(),m.Count)},Object(h.b)("span",{css:Object(h.a)(j(),m.CountName)},n),Object(h.b)("span",{css:Object(h.a)(v(),m.CountDate)},t))}w.defaultProps={onClick:void 0};var y=w,k={CountList:{maxWidth:"800px",padding:"0 24px 1px"}};function C(e){return 1===e?"":"s"}var S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=e.years,o=e.months,r=e.weeks,i=e.days,c=e.hours,s=e.minutes,u=e.seconds,l=[];n&&a&&(l.push(a+" year"+C(a)),n--),n&&o&&(l.push(o+" month"+C(o)),n--),n&&r&&(l.push(r+" week"+C(r)),n--),n&&i&&(l.push(i+" day"+C(i)),n--),n&&c&&(l.push(c+" hour"+C(c)),n--),n&&s&&(l.push(s+" minute"+C(s)),n--),n&&u&&(l.push(u+" second"+C(u)),n--);var d=t?"":"ago";return"".concat(t?"in":""," ").concat(l.join(", ")," ").concat(d).trim()},x=n(11),I=n.n(x),A=n(4),D=n.n(A),G=function(e){var t=new Date,n=D()(e),a=n>t,o={days:(Math.abs(I()(n,t))/86400).toFixed(2)};return S(o,a,1)},H=function(e){return{years:e/3154e7|0,months:e%3154e7/2628e6|0,weeks:e%2628e6/6048e5|0,days:e%6048e5/864e5|0,hours:e%864e5/36e5|0,minutes:e%36e5/6e4|0,seconds:e%6e4/1e3|0}},N=n(5),E=n.n(N),L=function(e){var t=new Date,n=D()(e),a=n>t,o=Math.abs(E()(n,t)),r=H(o);return S(r,a)};function z(){var e=Object(f.a)(["",""]);return z=function(){return e},e}var B=function(e){var t=e.events,n=Object(a.useState)(!1),o=Object(g.a)(n,2),r=o[0],i=o[1];return Object(h.b)("div",{css:Object(h.a)(z(),k.CountList)},t?t.map(function(e,t){var n=r?G(e.date):L(e.date);return Object(h.b)(y,{date:n,key:t,name:e.name,onClick:function(){return i(!r)}})}):Object(h.b)("p",null,"Looks like you don't have any countdowns! Go to ",Object(h.b)("a",{href:"https://calendar.google.com"},"Google Calendar"),' and update the description for any event with "',Object(h.b)("code",null,"#countdown"),'".'))},U=function(e){var t=e.split(" "),n=t[0].substring(0,1).toUpperCase();return t.length>1&&(n+=t[t.length-1].substring(0,1).toUpperCase()),n},q={Avatar:{alignItems:"center",backgroundColor:"#ffffff",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover",border:"none",borderRadius:"50%",color:"#282c34",display:"inline-flex",height:"36px",lineHeight:"36px",justifyContent:"center",width:"36px"}};function J(){var e=Object(f.a)(["",""]);return J=function(){return e},e}var M=function(e){var t=e.name,n=e.src,a=t?U(t):null,o=n&&{backgroundImage:"url(".concat(n,")")};return Object(h.b)("span",{css:Object(h.a)(J(),q.Avatar),style:o||null},o?null:a)},F={Button:{background:"transparent",border:"2px solid currentColor",borderRadius:"4px",color:"#ffffff",cursor:"pointer",display:"inline-flex",fontSize:"inherit",lineHeight:"inherit",padding:"4px 12px",textDecoration:"none",transition:"background-color 0.3s ease 0s","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}}};function R(){var e=Object(f.a)(["",""]);return R=function(){return e},e}var W=function(e){var t=e.onClick,n=e.text;return Object(h.b)("button",{css:Object(h.a)(R(),F.Button),onClick:t,type:"button"},n)},P={Header:{alignItems:"center",borderBottom:"1px solid #aaaaaa",display:"flex",justifyContent:"space-between",padding:"16px 24px"},HeaderName:{fontSize:"1.8em"},HeaderUser:{alignItems:"center",display:"flex"},HeaderUserName:{marginLeft:"12px","@media (max-width: 520px)":{display:"none"}}};function $(){var e=Object(f.a)(["",""]);return $=function(){return e},e}function K(){var e=Object(f.a)(["",""]);return K=function(){return e},e}function Q(){var e=Object(f.a)(["",""]);return Q=function(){return e},e}function T(){var e=Object(f.a)(["",""]);return T=function(){return e},e}var X=function(e){var t=e.isSignedIn,n=e.name,a=e.photo,r=e.onSignInClick;return Object(h.b)("header",{css:Object(h.a)(T(),P.Header)},Object(h.b)("div",{css:Object(h.a)(Q(),P.HeaderName)},"CountdownApp"),Object(h.b)("div",{css:Object(h.a)(K(),P.HeaderUser)},t?Object(h.b)(o.a.Fragment,null,Object(h.b)(M,{name:n,src:a}),Object(h.b)("span",{css:Object(h.a)($(),P.HeaderUserName)},n)):Object(h.b)(W,{text:"Sign In",onClick:r})))},Z=["https://people.googleapis.com/$discovery/rest?version=v1","https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],V=["profile","https://www.googleapis.com/auth/calendar.readonly"].join(" "),Y=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={events:null,name:null,photo:null,isSignedIn:!1},n.onSignInClick=n.onSignInClick.bind(Object(b.a)(Object(b.a)(n))),n.initGoogleClient=n.initGoogleClient.bind(Object(b.a)(Object(b.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"addGoogleApiScript",value:function(){var e=this;window.onLoadGoogleApi=function(){window.gapi.load("client:auth2",e.initGoogleClient)};var t=document.createElement("script");t.src="https://apis.google.com/js/api.js?onload=onLoadGoogleApi",t.type="text/javascript",document.body.appendChild(t)}},{key:"onSignInClick",value:function(){window.gapi.auth2.getAuthInstance().signIn()}},{key:"updateSigninStatus",value:function(e){console.log(e)}},{key:"initGoogleClient",value:function(){var e=this,t=window.gapi,n=function(n){e.setState({isSignedIn:n}),n&&(t.client.people.people.get({resourceName:"people/me",personFields:"emailAddresses,names,photos"}).then(function(t){var n=t.result;e.setState({name:n.names.find(function(e){return e.metadata.primary}).displayName,photo:n.photos.find(function(e){return e.metadata.primary}).url})},function(e){console.log("Error: "+e.result.error.message)}),t.client.calendar.calendarList.list().then(function(n){var a=t.client.newBatch();n.result.items.forEach(function(e){var n=t.client.request({path:"https://www.googleapis.com/calendar/v3/calendars/"+e.id+"/events",type:"get",params:{q:"#countdown",timeMin:(new Date).toISOString()}});a.add(n)}),a.execute(function(t,n){var a=Object.keys(t).reduce(function(e,n){var a=t[n];if(a&&a.result&&a.result.items){var o=a.result.items.map(function(e){return{date:e.start.dateTime||e.start.date,name:e.summary}});e.push.apply(e,Object(c.a)(o))}return e},[]).sort(function(e,t){return new Date(e.date)-new Date(t.date)});e.setState({events:a})})}))};t.client.init({apiKey:"AIzaSyDgDZXqJtz2xSD8QfJlCGNf-SDI6n3eob0",clientId:"176181994885-0d0qr7m4ksasjr8hq5uc35fma124pea7.apps.googleusercontent.com",discoveryDocs:Z,scope:V}).then(function(){t.auth2.getAuthInstance().isSignedIn.listen(n),n(t.auth2.getAuthInstance().isSignedIn.get())})}},{key:"handleGoogleClientLoad",value:function(){window.gapi.load("client:auth2",this.initGoogleClient)}},{key:"componentDidMount",value:function(){this.addGoogleApiScript()}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(X,{isSignedIn:this.state.isSignedIn,onSignInClick:this.onSignInClick,name:this.state.name,photo:this.state.photo}),o.a.createElement(B,{events:this.state.events}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.5228700b.chunk.js.map