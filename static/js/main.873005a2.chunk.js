(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(25)},20:function(e,t,n){},21:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(7),r=n.n(i),c=(n(20),n(8)),s=n(9),u=n(13),l=n(10),d=n(12),p=n(3),b=(n(21),n(2)),g=n(0),f=n(11),m={Count:{display:"block",fontSize:"1em",margin:"1em 0",textAlign:"start"},CountName:{color:"#dadada",display:"block"},CountDate:{display:"block",fontSize:"1.3em"}};function v(){var e=Object(b.a)(["",""]);return v=function(){return e},e}function h(){var e=Object(b.a)(["",""]);return h=function(){return e},e}function j(){var e=Object(b.a)(["",""]);return j=function(){return e},e}var O=function(e){var t=e.date,n=e.name,a=Object(f.format)(t);return Object(g.b)("div",{css:Object(g.a)(j(),m.Count)},Object(g.b)("span",{css:Object(g.a)(h(),m.CountName)},n),Object(g.b)("span",{css:Object(g.a)(v(),m.CountDate)},a))},y={CountList:{maxWidth:"800px",padding:"0 24px 1px"}};function w(){var e=Object(b.a)(["",""]);return w=function(){return e},e}var k=function(e){var t=e.events;return Object(g.b)("div",{css:Object(g.a)(w(),y.CountList)},t?t.map(function(e,t){return Object(g.b)(O,{date:e.date,key:t,name:e.name})}):Object(g.b)("p",null,"Looks like you don't have any countdowns! Go to ",Object(g.b)("a",{href:"https://calendar.google.com"},"Google Calendar"),' and update the description for any event with "',Object(g.b)("code",null,"#countdown"),'".'))},C=function(e){var t=e.split(" "),n=t[0].substring(0,1).toUpperCase();return t.length>1&&(n+=t[t.length-1].substring(0,1).toUpperCase()),n},S={Avatar:{alignItems:"center",backgroundColor:"#ffffff",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover",border:"none",borderRadius:"50%",color:"#282c34",display:"inline-flex",height:"36px",lineHeight:"36px",justifyContent:"center",width:"36px"}};function x(){var e=Object(b.a)(["",""]);return x=function(){return e},e}var I=function(e){var t=e.name,n=e.src,a=t?C(t):null,o=n&&{backgroundImage:"url(".concat(n,")")};return Object(g.b)("span",{css:Object(g.a)(x(),S.Avatar),style:o||null},o?null:a)},A={Button:{background:"transparent",border:"2px solid currentColor",borderRadius:"4px",color:"#ffffff",cursor:"pointer",display:"inline-flex",fontSize:"inherit",lineHeight:"inherit",padding:"4px 12px",textDecoration:"none",transition:"background-color 0.3s ease 0s","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}}};function G(){var e=Object(b.a)(["",""]);return G=function(){return e},e}var D=function(e){var t=e.onClick,n=e.text;return Object(g.b)("button",{css:Object(g.a)(G(),A.Button),onClick:t,type:"button"},n)},H={Header:{alignItems:"center",borderBottom:"1px solid #aaaaaa",display:"flex",justifyContent:"space-between",padding:"16px 24px"},HeaderName:{fontSize:"1.8em"},HeaderUser:{alignItems:"center",display:"flex"},HeaderUserName:{marginLeft:"8px","@media (max-width: 520px)":{display:"none"}}};function N(){var e=Object(b.a)(["",""]);return N=function(){return e},e}function E(){var e=Object(b.a)(["",""]);return E=function(){return e},e}function z(){var e=Object(b.a)(["",""]);return z=function(){return e},e}function L(){var e=Object(b.a)(["",""]);return L=function(){return e},e}var B=function(e){var t=e.isSignedIn,n=e.name,a=e.photo,i=e.onSignInClick;return Object(g.b)("header",{css:Object(g.a)(L(),H.Header)},Object(g.b)("div",{css:Object(g.a)(z(),H.HeaderName)},"CountdownApp"),Object(g.b)("div",{css:Object(g.a)(E(),H.HeaderUser)},t?Object(g.b)(o.a.Fragment,null,Object(g.b)(I,{name:n,src:a}),Object(g.b)("span",{css:Object(g.a)(N(),H.HeaderUserName)},n)):Object(g.b)(D,{text:"Sign In",onClick:i})))},U=["https://people.googleapis.com/$discovery/rest?version=v1","https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],q=["profile","https://www.googleapis.com/auth/calendar.readonly"].join(" "),J=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={events:null,name:null,photo:null,isSignedIn:!1},n.onSignInClick=n.onSignInClick.bind(Object(p.a)(Object(p.a)(n))),n.initGoogleClient=n.initGoogleClient.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"addGoogleApiScript",value:function(){var e=this;window.onLoadGoogleApi=function(){window.gapi.load("client:auth2",e.initGoogleClient)};var t=document.createElement("script");t.src="https://apis.google.com/js/api.js?onload=onLoadGoogleApi",t.type="text/javascript",document.body.appendChild(t)}},{key:"onSignInClick",value:function(){window.gapi.auth2.getAuthInstance().signIn()}},{key:"updateSigninStatus",value:function(e){console.log(e)}},{key:"initGoogleClient",value:function(){var e=this,t=window.gapi,n=function(n){e.setState({isSignedIn:n}),n&&(t.client.people.people.get({resourceName:"people/me",personFields:"emailAddresses,names,photos"}).then(function(t){var n=t.result;e.setState({name:n.names.find(function(e){return e.metadata.primary}).displayName,photo:n.photos.find(function(e){return e.metadata.primary}).url})},function(e){console.log("Error: "+e.result.error.message)}),t.client.calendar.events.list({calendarId:"primary",showDeleted:!1,singleEvents:!0,orderBy:"startTime",q:"#countdown"}).then(function(t){var n=t.result.items.map(function(e){return{date:e.start.dateTime||e.start.date,name:e.summary}}).reverse();e.setState({events:n})}))};t.client.init({apiKey:"AIzaSyDgDZXqJtz2xSD8QfJlCGNf-SDI6n3eob0",clientId:"176181994885-0d0qr7m4ksasjr8hq5uc35fma124pea7.apps.googleusercontent.com",discoveryDocs:U,scope:q}).then(function(){t.auth2.getAuthInstance().isSignedIn.listen(n),n(t.auth2.getAuthInstance().isSignedIn.get())})}},{key:"handleGoogleClientLoad",value:function(){window.gapi.load("client:auth2",this.initGoogleClient)}},{key:"componentDidMount",value:function(){this.addGoogleApiScript()}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(B,{isSignedIn:this.state.isSignedIn,onSignInClick:this.onSignInClick,name:this.state.name,photo:this.state.photo}),o.a.createElement(k,{events:this.state.events}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[14,1,2]]]);
//# sourceMappingURL=main.873005a2.chunk.js.map