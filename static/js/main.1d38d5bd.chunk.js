(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(24)},20:function(e,t,n){},21:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(6),i=n.n(r),c=(n(20),n(11)),s=n(7),u=n(8),l=n(12),d=n(9),p=n(13),b=n(3),f=(n(21),n(2)),g=n(0),m={Count:{display:"block",margin:"1.2em 0",textAlign:"start"},CountName:{color:"#dadada",display:"block"},CountDate:{display:"block",fontSize:"1.3em"}};function h(e){return 1===e?"":"s"}var v=function(e,t){var n=e.years,a=e.months,o=e.weeks,r=e.days,i=e.hours,c=e.minutes,s=e.seconds,u=3,l=[];u&&n&&(l.push(n+" year"+h(n)),u--),u&&a&&(l.push(a+" month"+h(a)),u--),u&&o&&(l.push(o+" week"+h(o)),u--),u&&r&&(l.push(r+" day"+h(r)),u--),u&&i&&(l.push(i+" hour"+h(i)),u--),u&&c&&(l.push(c+" minute"+h(c)),u--),u&&s&&(l.push(s+" second"+h(s)),u--);var d=t?"":"ago";return"".concat(t?"in":""," ").concat(l.join(", ")," ").concat(d).trim()},j=function(e){return{years:e/3154e7|0,months:e%3154e7/2628e6|0,weeks:e%2628e6/6048e5|0,days:e%6048e5/864e5|0,hours:e%864e5/36e5|0,minutes:e%36e5/6e4|0,seconds:e%6e4/1e3|0}},O=n(10),w=n.n(O),y=n(4),k=n.n(y),C=function(e){var t=new Date,n=k()(e),a=n>t,o=Math.abs(w()(n,t)),r=j(o);return v(r,a)};function S(){var e=Object(f.a)(["",""]);return S=function(){return e},e}function x(){var e=Object(f.a)(["",""]);return x=function(){return e},e}function I(){var e=Object(f.a)(["",""]);return I=function(){return e},e}var A=function(e){var t=e.date,n=e.name,a=C(t);return Object(g.b)("div",{css:Object(g.a)(I(),m.Count)},Object(g.b)("span",{css:Object(g.a)(x(),m.CountName)},n),Object(g.b)("span",{css:Object(g.a)(S(),m.CountDate)},a))},D={CountList:{maxWidth:"800px",padding:"0 24px 1px"}};function G(){var e=Object(f.a)(["",""]);return G=function(){return e},e}var H=function(e){var t=e.events;return Object(g.b)("div",{css:Object(g.a)(G(),D.CountList)},t?t.map(function(e,t){return Object(g.b)(A,{date:e.date,key:t,name:e.name})}):Object(g.b)("p",null,"Looks like you don't have any countdowns! Go to ",Object(g.b)("a",{href:"https://calendar.google.com"},"Google Calendar"),' and update the description for any event with "',Object(g.b)("code",null,"#countdown"),'".'))},N=function(e){var t=e.split(" "),n=t[0].substring(0,1).toUpperCase();return t.length>1&&(n+=t[t.length-1].substring(0,1).toUpperCase()),n},E={Avatar:{alignItems:"center",backgroundColor:"#ffffff",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover",border:"none",borderRadius:"50%",color:"#282c34",display:"inline-flex",height:"36px",lineHeight:"36px",justifyContent:"center",width:"36px"}};function L(){var e=Object(f.a)(["",""]);return L=function(){return e},e}var z=function(e){var t=e.name,n=e.src,a=t?N(t):null,o=n&&{backgroundImage:"url(".concat(n,")")};return Object(g.b)("span",{css:Object(g.a)(L(),E.Avatar),style:o||null},o?null:a)},B={Button:{background:"transparent",border:"2px solid currentColor",borderRadius:"4px",color:"#ffffff",cursor:"pointer",display:"inline-flex",fontSize:"inherit",lineHeight:"inherit",padding:"4px 12px",textDecoration:"none",transition:"background-color 0.3s ease 0s","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}}};function U(){var e=Object(f.a)(["",""]);return U=function(){return e},e}var q=function(e){var t=e.onClick,n=e.text;return Object(g.b)("button",{css:Object(g.a)(U(),B.Button),onClick:t,type:"button"},n)},J={Header:{alignItems:"center",borderBottom:"1px solid #aaaaaa",display:"flex",justifyContent:"space-between",padding:"16px 24px"},HeaderName:{fontSize:"1.8em"},HeaderUser:{alignItems:"center",display:"flex"},HeaderUserName:{marginLeft:"12px","@media (max-width: 520px)":{display:"none"}}};function M(){var e=Object(f.a)(["",""]);return M=function(){return e},e}function R(){var e=Object(f.a)(["",""]);return R=function(){return e},e}function W(){var e=Object(f.a)(["",""]);return W=function(){return e},e}function F(){var e=Object(f.a)(["",""]);return F=function(){return e},e}var $=function(e){var t=e.isSignedIn,n=e.name,a=e.photo,r=e.onSignInClick;return Object(g.b)("header",{css:Object(g.a)(F(),J.Header)},Object(g.b)("div",{css:Object(g.a)(W(),J.HeaderName)},"CountdownApp"),Object(g.b)("div",{css:Object(g.a)(R(),J.HeaderUser)},t?Object(g.b)(o.a.Fragment,null,Object(g.b)(z,{name:n,src:a}),Object(g.b)("span",{css:Object(g.a)(M(),J.HeaderUserName)},n)):Object(g.b)(q,{text:"Sign In",onClick:r})))},K=["https://people.googleapis.com/$discovery/rest?version=v1","https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],P=["profile","https://www.googleapis.com/auth/calendar.readonly"].join(" "),Q=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={events:null,name:null,photo:null,isSignedIn:!1},n.onSignInClick=n.onSignInClick.bind(Object(b.a)(Object(b.a)(n))),n.initGoogleClient=n.initGoogleClient.bind(Object(b.a)(Object(b.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"addGoogleApiScript",value:function(){var e=this;window.onLoadGoogleApi=function(){window.gapi.load("client:auth2",e.initGoogleClient)};var t=document.createElement("script");t.src="https://apis.google.com/js/api.js?onload=onLoadGoogleApi",t.type="text/javascript",document.body.appendChild(t)}},{key:"onSignInClick",value:function(){window.gapi.auth2.getAuthInstance().signIn()}},{key:"updateSigninStatus",value:function(e){console.log(e)}},{key:"initGoogleClient",value:function(){var e=this,t=window.gapi,n=function(n){e.setState({isSignedIn:n}),n&&(t.client.people.people.get({resourceName:"people/me",personFields:"emailAddresses,names,photos"}).then(function(t){var n=t.result;e.setState({name:n.names.find(function(e){return e.metadata.primary}).displayName,photo:n.photos.find(function(e){return e.metadata.primary}).url})},function(e){console.log("Error: "+e.result.error.message)}),t.client.calendar.calendarList.list().then(function(n){var a=t.client.newBatch();n.result.items.forEach(function(e){var n=t.client.request({path:"https://www.googleapis.com/calendar/v3/calendars/"+e.id+"/events",type:"get",params:{q:"#countdown",timeMin:(new Date).toISOString()}});a.add(n)}),a.execute(function(t,n){var a=Object.keys(t).reduce(function(e,n){var a=t[n];if(a&&a.result&&a.result.items){var o=a.result.items.map(function(e){return{date:e.start.dateTime||e.start.date,name:e.summary}});e.push.apply(e,Object(c.a)(o))}return e},[]).sort(function(e,t){return new Date(e.date)-new Date(t.date)});e.setState({events:a})})}))};t.client.init({apiKey:"AIzaSyDgDZXqJtz2xSD8QfJlCGNf-SDI6n3eob0",clientId:"176181994885-0d0qr7m4ksasjr8hq5uc35fma124pea7.apps.googleusercontent.com",discoveryDocs:K,scope:P}).then(function(){t.auth2.getAuthInstance().isSignedIn.listen(n),n(t.auth2.getAuthInstance().isSignedIn.get())})}},{key:"handleGoogleClientLoad",value:function(){window.gapi.load("client:auth2",this.initGoogleClient)}},{key:"componentDidMount",value:function(){this.addGoogleApiScript()}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement($,{isSignedIn:this.state.isSignedIn,onSignInClick:this.onSignInClick,name:this.state.name,photo:this.state.photo}),o.a.createElement(H,{events:this.state.events}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[14,1,2]]]);
//# sourceMappingURL=main.1d38d5bd.chunk.js.map