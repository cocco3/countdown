(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(24)},20:function(e,n,t){},21:function(e,n,t){},24:function(e,n,t){"use strict";t.r(n);var a=t(1),o=t.n(a),r=t(6),i=t.n(r),c=(t(20),t(11)),s=t(7),u=t(8),l=t(12),d=t(9),p=t(13),b=t(3),f=(t(21),t(2)),m=t(0),g={Count:{display:"block",fontSize:"1em",margin:"1.2em 0",textAlign:"start"},CountName:{color:"#dadada",display:"block"},CountDate:{display:"block",fontSize:"1.3em"}};function h(e){return 1===e?"":"s"}var v=function(e,n){var t=e.years,a=e.months,o=e.days,r=e.hours,i=e.minutes,c=e.seconds,s=[];t&&s.push(t+" year"+h(t)),a&&s.push(a+" month"+h(a)),o&&s.push(o+" day"+h(o)),r&&s.push(r+" hour"+h(r)),i&&s.push(i+" minute"+h(i)),c&&s.push(c+" second"+h(c));var u=n?"":"ago";return"".concat(n?"in":""," ").concat(s.join(", ")," ").concat(u).trim()},j=function(e,n){var t=e.years,a=e.months,o=e.days,r=e.hours,i=e.minutes,c=e.seconds,s={};return t?s={years:t,months:a,days:o}:a?s={months:a,days:o,hours:r}:o?s={days:o,hours:r,minutes:i}:r?s={hours:r,minutes:i,seconds:c}:i?s={minutes:i,seconds:c}:c&&(s={seconds:c}),v(s,n)},y=function(e){return{years:e/3154e7|0,months:e%3154e7/2628e6|0,days:e%2628e6/864e5|0,hours:e%864e5/36e5|0,minutes:e%36e5/6e4|0,seconds:e%6e4/1e3|0}},O=t(10),w=t.n(O),k=t(4),C=t.n(k),S=function(e){var n=new Date,t=C()(e),a=t>n,o=Math.abs(w()(t,n)),r=y(o);return j(r,a)};function x(){var e=Object(f.a)(["",""]);return x=function(){return e},e}function I(){var e=Object(f.a)(["",""]);return I=function(){return e},e}function A(){var e=Object(f.a)(["",""]);return A=function(){return e},e}var D=function(e){var n=e.date,t=e.name,a=S(n);return Object(m.b)("div",{css:Object(m.a)(A(),g.Count)},Object(m.b)("span",{css:Object(m.a)(I(),g.CountName)},t),Object(m.b)("span",{css:Object(m.a)(x(),g.CountDate)},a))},G={CountList:{maxWidth:"800px",padding:"0 24px 1px"}};function H(){var e=Object(f.a)(["",""]);return H=function(){return e},e}var N=function(e){var n=e.events;return Object(m.b)("div",{css:Object(m.a)(H(),G.CountList)},n?n.map(function(e,n){return Object(m.b)(D,{date:e.date,key:n,name:e.name})}):Object(m.b)("p",null,"Looks like you don't have any countdowns! Go to ",Object(m.b)("a",{href:"https://calendar.google.com"},"Google Calendar"),' and update the description for any event with "',Object(m.b)("code",null,"#countdown"),'".'))},E=function(e){var n=e.split(" "),t=n[0].substring(0,1).toUpperCase();return n.length>1&&(t+=n[n.length-1].substring(0,1).toUpperCase()),t},L={Avatar:{alignItems:"center",backgroundColor:"#ffffff",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover",border:"none",borderRadius:"50%",color:"#282c34",display:"inline-flex",height:"36px",lineHeight:"36px",justifyContent:"center",width:"36px"}};function z(){var e=Object(f.a)(["",""]);return z=function(){return e},e}var B=function(e){var n=e.name,t=e.src,a=n?E(n):null,o=t&&{backgroundImage:"url(".concat(t,")")};return Object(m.b)("span",{css:Object(m.a)(z(),L.Avatar),style:o||null},o?null:a)},U={Button:{background:"transparent",border:"2px solid currentColor",borderRadius:"4px",color:"#ffffff",cursor:"pointer",display:"inline-flex",fontSize:"inherit",lineHeight:"inherit",padding:"4px 12px",textDecoration:"none",transition:"background-color 0.3s ease 0s","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}}};function q(){var e=Object(f.a)(["",""]);return q=function(){return e},e}var J=function(e){var n=e.onClick,t=e.text;return Object(m.b)("button",{css:Object(m.a)(q(),U.Button),onClick:n,type:"button"},t)},M={Header:{alignItems:"center",borderBottom:"1px solid #aaaaaa",display:"flex",justifyContent:"space-between",padding:"16px 24px"},HeaderName:{fontSize:"1.8em"},HeaderUser:{alignItems:"center",display:"flex"},HeaderUserName:{marginLeft:"8px","@media (max-width: 520px)":{display:"none"}}};function R(){var e=Object(f.a)(["",""]);return R=function(){return e},e}function W(){var e=Object(f.a)(["",""]);return W=function(){return e},e}function F(){var e=Object(f.a)(["",""]);return F=function(){return e},e}function $(){var e=Object(f.a)(["",""]);return $=function(){return e},e}var K=function(e){var n=e.isSignedIn,t=e.name,a=e.photo,r=e.onSignInClick;return Object(m.b)("header",{css:Object(m.a)($(),M.Header)},Object(m.b)("div",{css:Object(m.a)(F(),M.HeaderName)},"CountdownApp"),Object(m.b)("div",{css:Object(m.a)(W(),M.HeaderUser)},n?Object(m.b)(o.a.Fragment,null,Object(m.b)(B,{name:t,src:a}),Object(m.b)("span",{css:Object(m.a)(R(),M.HeaderUserName)},t)):Object(m.b)(J,{text:"Sign In",onClick:r})))},P=["https://people.googleapis.com/$discovery/rest?version=v1","https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],Q=["profile","https://www.googleapis.com/auth/calendar.readonly"].join(" "),T=function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(l.a)(this,Object(d.a)(n).call(this,e))).state={events:null,name:null,photo:null,isSignedIn:!1},t.onSignInClick=t.onSignInClick.bind(Object(b.a)(Object(b.a)(t))),t.initGoogleClient=t.initGoogleClient.bind(Object(b.a)(Object(b.a)(t))),t}return Object(p.a)(n,e),Object(u.a)(n,[{key:"addGoogleApiScript",value:function(){var e=this;window.onLoadGoogleApi=function(){window.gapi.load("client:auth2",e.initGoogleClient)};var n=document.createElement("script");n.src="https://apis.google.com/js/api.js?onload=onLoadGoogleApi",n.type="text/javascript",document.body.appendChild(n)}},{key:"onSignInClick",value:function(){window.gapi.auth2.getAuthInstance().signIn()}},{key:"updateSigninStatus",value:function(e){console.log(e)}},{key:"initGoogleClient",value:function(){var e=this,n=window.gapi,t=function(t){e.setState({isSignedIn:t}),t&&(n.client.people.people.get({resourceName:"people/me",personFields:"emailAddresses,names,photos"}).then(function(n){var t=n.result;e.setState({name:t.names.find(function(e){return e.metadata.primary}).displayName,photo:t.photos.find(function(e){return e.metadata.primary}).url})},function(e){console.log("Error: "+e.result.error.message)}),n.client.calendar.calendarList.list().then(function(t){var a=n.client.newBatch();t.result.items.forEach(function(e){var t=n.client.request({path:"https://www.googleapis.com/calendar/v3/calendars/"+e.id+"/events",type:"get",params:{q:"#countdown",timeMin:(new Date).toISOString()}});a.add(t)}),a.execute(function(n,t){var a=Object.keys(n).reduce(function(e,t){var a=n[t];if(a&&a.result&&a.result.items){var o=a.result.items.map(function(e){return{date:e.start.dateTime||e.start.date,name:e.summary}});e.push.apply(e,Object(c.a)(o))}return e},[]).sort(function(e,n){return new Date(e.date)-new Date(n.date)});e.setState({events:a})})}))};n.client.init({apiKey:"AIzaSyDgDZXqJtz2xSD8QfJlCGNf-SDI6n3eob0",clientId:"176181994885-0d0qr7m4ksasjr8hq5uc35fma124pea7.apps.googleusercontent.com",discoveryDocs:P,scope:Q}).then(function(){n.auth2.getAuthInstance().isSignedIn.listen(t),t(n.auth2.getAuthInstance().isSignedIn.get())})}},{key:"handleGoogleClientLoad",value:function(){window.gapi.load("client:auth2",this.initGoogleClient)}},{key:"componentDidMount",value:function(){this.addGoogleApiScript()}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(K,{isSignedIn:this.state.isSignedIn,onSignInClick:this.onSignInClick,name:this.state.name,photo:this.state.photo}),o.a.createElement(N,{events:this.state.events}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[14,1,2]]]);
//# sourceMappingURL=main.ce574698.chunk.js.map