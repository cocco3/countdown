(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(26)},21:function(e,t,n){},22:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(7),r=n.n(i),c=(n(21),n(12)),s=n(8),u=n(9),l=n(13),d=n(10),p=n(14),b=n(3),f=(n(22),n(2)),g=n(0),m=n(11),v={Count:{display:"block",fontSize:"1em",margin:"1.2em 0",textAlign:"start"},CountName:{color:"#dadada",display:"block"},CountDate:{display:"block",fontSize:"1.3em"}};function h(){var e=Object(f.a)(["",""]);return h=function(){return e},e}function j(){var e=Object(f.a)(["",""]);return j=function(){return e},e}function O(){var e=Object(f.a)(["",""]);return O=function(){return e},e}var w=function(e){var t=e.date,n=e.name,a=Object(m.format)(t);return Object(g.b)("div",{css:Object(g.a)(O(),v.Count)},Object(g.b)("span",{css:Object(g.a)(j(),v.CountName)},n),Object(g.b)("span",{css:Object(g.a)(h(),v.CountDate)},a))},y={CountList:{maxWidth:"800px",padding:"0 24px 1px"}};function k(){var e=Object(f.a)(["",""]);return k=function(){return e},e}var C=function(e){var t=e.events;return Object(g.b)("div",{css:Object(g.a)(k(),y.CountList)},t?t.map(function(e,t){return Object(g.b)(w,{date:e.date,key:t,name:e.name})}):Object(g.b)("p",null,"Looks like you don't have any countdowns! Go to ",Object(g.b)("a",{href:"https://calendar.google.com"},"Google Calendar"),' and update the description for any event with "',Object(g.b)("code",null,"#countdown"),'".'))},S=function(e){var t=e.split(" "),n=t[0].substring(0,1).toUpperCase();return t.length>1&&(n+=t[t.length-1].substring(0,1).toUpperCase()),n},x={Avatar:{alignItems:"center",backgroundColor:"#ffffff",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover",border:"none",borderRadius:"50%",color:"#282c34",display:"inline-flex",height:"36px",lineHeight:"36px",justifyContent:"center",width:"36px"}};function I(){var e=Object(f.a)(["",""]);return I=function(){return e},e}var A=function(e){var t=e.name,n=e.src,a=t?S(t):null,o=n&&{backgroundImage:"url(".concat(n,")")};return Object(g.b)("span",{css:Object(g.a)(I(),x.Avatar),style:o||null},o?null:a)},G={Button:{background:"transparent",border:"2px solid currentColor",borderRadius:"4px",color:"#ffffff",cursor:"pointer",display:"inline-flex",fontSize:"inherit",lineHeight:"inherit",padding:"4px 12px",textDecoration:"none",transition:"background-color 0.3s ease 0s","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}}};function D(){var e=Object(f.a)(["",""]);return D=function(){return e},e}var H=function(e){var t=e.onClick,n=e.text;return Object(g.b)("button",{css:Object(g.a)(D(),G.Button),onClick:t,type:"button"},n)},N={Header:{alignItems:"center",borderBottom:"1px solid #aaaaaa",display:"flex",justifyContent:"space-between",padding:"16px 24px"},HeaderName:{fontSize:"1.8em"},HeaderUser:{alignItems:"center",display:"flex"},HeaderUserName:{marginLeft:"8px","@media (max-width: 520px)":{display:"none"}}};function E(){var e=Object(f.a)(["",""]);return E=function(){return e},e}function L(){var e=Object(f.a)(["",""]);return L=function(){return e},e}function z(){var e=Object(f.a)(["",""]);return z=function(){return e},e}function B(){var e=Object(f.a)(["",""]);return B=function(){return e},e}var U=function(e){var t=e.isSignedIn,n=e.name,a=e.photo,i=e.onSignInClick;return Object(g.b)("header",{css:Object(g.a)(B(),N.Header)},Object(g.b)("div",{css:Object(g.a)(z(),N.HeaderName)},"CountdownApp"),Object(g.b)("div",{css:Object(g.a)(L(),N.HeaderUser)},t?Object(g.b)(o.a.Fragment,null,Object(g.b)(A,{name:n,src:a}),Object(g.b)("span",{css:Object(g.a)(E(),N.HeaderUserName)},n)):Object(g.b)(H,{text:"Sign In",onClick:i})))},q=["https://people.googleapis.com/$discovery/rest?version=v1","https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],J=["profile","https://www.googleapis.com/auth/calendar.readonly"].join(" "),R=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={events:null,name:null,photo:null,isSignedIn:!1},n.onSignInClick=n.onSignInClick.bind(Object(b.a)(Object(b.a)(n))),n.initGoogleClient=n.initGoogleClient.bind(Object(b.a)(Object(b.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"addGoogleApiScript",value:function(){var e=this;window.onLoadGoogleApi=function(){window.gapi.load("client:auth2",e.initGoogleClient)};var t=document.createElement("script");t.src="https://apis.google.com/js/api.js?onload=onLoadGoogleApi",t.type="text/javascript",document.body.appendChild(t)}},{key:"onSignInClick",value:function(){window.gapi.auth2.getAuthInstance().signIn()}},{key:"updateSigninStatus",value:function(e){console.log(e)}},{key:"initGoogleClient",value:function(){var e=this,t=window.gapi,n=function(n){e.setState({isSignedIn:n}),n&&(t.client.people.people.get({resourceName:"people/me",personFields:"emailAddresses,names,photos"}).then(function(t){var n=t.result;e.setState({name:n.names.find(function(e){return e.metadata.primary}).displayName,photo:n.photos.find(function(e){return e.metadata.primary}).url})},function(e){console.log("Error: "+e.result.error.message)}),t.client.calendar.calendarList.list().then(function(n){var a=t.client.newBatch();n.result.items.forEach(function(e){var n=t.client.request({path:"https://www.googleapis.com/calendar/v3/calendars/"+e.id+"/events",type:"get",params:{q:"#countdown",timeMin:(new Date).toISOString()}});a.add(n)}),a.execute(function(t,n){var a=Object.keys(t).reduce(function(e,n){var a=t[n];if(a&&a.result&&a.result.items){var o=a.result.items.map(function(e){return{date:e.start.dateTime||e.start.date,name:e.summary}});e.push.apply(e,Object(c.a)(o))}return e},[]).sort(function(e,t){return new Date(e.date)-new Date(t.date)});e.setState({events:a})})}))};t.client.init({apiKey:"AIzaSyDgDZXqJtz2xSD8QfJlCGNf-SDI6n3eob0",clientId:"176181994885-0d0qr7m4ksasjr8hq5uc35fma124pea7.apps.googleusercontent.com",discoveryDocs:q,scope:J}).then(function(){t.auth2.getAuthInstance().isSignedIn.listen(n),n(t.auth2.getAuthInstance().isSignedIn.get())})}},{key:"handleGoogleClientLoad",value:function(){window.gapi.load("client:auth2",this.initGoogleClient)}},{key:"componentDidMount",value:function(){this.addGoogleApiScript()}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(U,{isSignedIn:this.state.isSignedIn,onSignInClick:this.onSignInClick,name:this.state.name,photo:this.state.photo}),o.a.createElement(C,{events:this.state.events}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.0df13e95.chunk.js.map